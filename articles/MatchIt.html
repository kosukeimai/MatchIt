<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MatchIt: Getting Started • MatchIt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MatchIt: Getting Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MatchIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/MatchIt.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/matching-methods.html">Matching Methods</a></li>
    <li><a class="dropdown-item" href="../articles/assessing-balance.html">Assessing Balance</a></li>
    <li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Matching</a></li>
    <li><a class="dropdown-item" href="../articles/sampling-weights.html">Matching with Sampling Weights</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kosukeimai/MatchIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>MatchIt: Getting Started</h1>
                        <h4 data-toc-skip class="author">Noah
Greifer</h4>
            
            <h4 data-toc-skip class="date">2025-03-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kosukeimai/MatchIt/blob/master/vignettes/MatchIt.Rmd" class="external-link"><code>vignettes/MatchIt.Rmd</code></a></small>
      <div class="d-none name"><code>MatchIt.Rmd</code></div>
    </div>

    
    
<style>
pre {
  overflow-x: auto;
}
pre code {
  word-wrap: normal;
  white-space: pre;
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>MatchIt</code> implements the suggestions of <span class="citation">Ho et al. (<a href="#ref-ho2007">2007</a>)</span> for
improving parametric statistical models for estimating treatment effects
in observational studies and reducing model dependence by preprocessing
data with semi-parametric and non-parametric matching methods. After
appropriately preprocessing with <code>MatchIt</code>, researchers can
use whatever parametric model they would have used without
<code>MatchIt</code> and produce inferences that are more robust and
less sensitive to modeling assumptions. <code>MatchIt</code> reduces the
dependence of causal inferences on commonly made, but hard-to-justify,
statistical modeling assumptions using a large range of sophisticated
matching methods. The package includes several popular approaches to
matching and provides access to methods implemented in other packages
through its single, unified, and easy-to-use interface.</p>
<p>Matching is used in the context of estimating the causal effect of a
binary treatment or exposure on an outcome while controlling for
measured pre-treatment variables, typically confounding variables or
variables prognostic of the outcome. Here and throughout the
<code>MatchIt</code> documentation we use the word “treatment” to refer
to the focal causal variable of interest, with “treated” and “control”
reflecting the names of the treatment groups. The goal of matching is to
produce <em>covariate balance</em>, that is, for the distributions of
covariates in the two groups to be approximately equal to each other, as
they would be in a successful randomized experiment. The importance of
covariate balance is that it allows for increased robustness to the
choice of model used to estimate the treatment effect; in perfectly
balanced samples, a simple difference in means can be a valid treatment
effect estimate. Here we do not aim to provide a full introduction to
matching or causal inference theory, but simply to explain how to use
<code>MatchIt</code> to perform nonparametric preprocessing. For
excellent and accessible introductions to matching, see <span class="citation">Stuart (<a href="#ref-stuart2010">2010</a>)</span> and
<span class="citation">Austin (<a href="#ref-austin2011b">2011</a>)</span>.</p>
<p>A matching analysis involves four primary steps: 1) planning, 2)
matching, 3) assessing the quality of matches, and 4) estimating the
treatment effect and its uncertainty. Here we briefly discuss these
steps and how they can be implemented with <code>MatchIt</code>; in the
other included vignettes, these steps are discussed in more detail.</p>
<p>We will use Lalonde’s data on the evaluation of the National
Supported Work program to demonstrate <code>MatchIt</code>’s
capabilities. First, we load <code>MatchIt</code> and bring in the
<code>lalonde</code> dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://kosukeimai.github.io/MatchIt/">"MatchIt"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">lalonde</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      treat age educ   race married nodegree re74 re75       re78</span></span>
<span><span class="co">## NSW1     1  37   11  black       1        1    0    0  9930.0460</span></span>
<span><span class="co">## NSW2     1  22    9 hispan       0        1    0    0  3595.8940</span></span>
<span><span class="co">## NSW3     1  30   12  black       0        0    0    0 24909.4500</span></span>
<span><span class="co">## NSW4     1  27   11  black       0        1    0    0  7506.1460</span></span>
<span><span class="co">## NSW5     1  33    8  black       0        1    0    0   289.7899</span></span>
<span><span class="co">## NSW6     1  22    9  black       0        1    0    0  4056.4940</span></span></code></pre>
<p>The statistical quantity of interest is the causal effect of the
treatment (<code>treat</code>) on 1978 earnings (<code>re78</code>). The
other variables are pre-treatment covariates. See <code><a href="../reference/lalonde.html">?lalonde</a></code>
for more information on this dataset. In particular, the analysis is
concerned with the marginal, total effect of the treatment for those who
actually received the treatment.</p>
<p>In what follows, we briefly describe the four steps of a matching
analysis and how to implement them in <code>MatchIt</code>. For more
details, we recommend reading the other vignettes,
<code><a href="../articles/matching-methods.html">vignette("matching-methods")</a></code>,
<code><a href="../articles/assessing-balance.html">vignette("assessing-balance")</a></code>, and
<code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code>, especially for users less
familiar with matching methods. For the use of <code>MatchIt</code> with
sampling weights, also see <code><a href="../articles/sampling-weights.html">vignette("sampling-weights")</a></code>. It
is important to recognize that the ease of using <code>MatchIt</code>
does not imply the simplicity of matching methods; advanced statistical
methods like matching that require many decisions to be made and caution
in their use should only be performed by those with statistical
training.</p>
</div>
<div class="section level2">
<h2 id="planning">Planning<a class="anchor" aria-label="anchor" href="#planning"></a>
</h2>
<p>The planning phase of a matching analysis involves selecting the type
of effect to be estimated, selecting the target population to which the
treatment effect is to generalize, and selecting the covariates for
which balance is required for an unbiased estimate of the treatment
effect. Each of these are theoretical steps that do not involve
performing analyses on the data. Ideally, they should be considered
prior to data collection in the planning stage of a study. Thinking
about them early can aid in performing a complete and cost-effective
analysis.</p>
<p><strong>Selecting the type of effect to be estimated.</strong> There
are a few different types of effects to be estimated. In the presence of
mediating variables, one might be interested in the direct effect of the
treatment that does not pass through the mediating variables or the
total effect of the treatment across all causal pathways. Matching is
well suited for estimating total effects, and specific mediation methods
may be better suited for other mediation-related quantities. One may be
interested in a conditional effect or a marginal effect. A conditional
effect is the effect of a treatment within some strata of other
prognostic variables (e.g., at the patient level), and a marginal effect
is the average effect of a treatment in a population (e.g., for
implementing a broad policy change). Different types of matching are
well suited for each of these, but the most common forms are best used
for estimating marginal treatment effects; for conditional treatment
effects, typically modeling assumptions are required or matching must be
done within strata of the conditioning variables. Matching can reduce
the reliance on correct model specification for conditional effects.</p>
<p><strong>Selecting a target population.</strong> The target population
is the population to which the effect estimate is to generalize.
Typically, an effect estimated in a sample generalizes to the population
from which the sample is a probability sample. If the sample is not a
probability sample from any population (e.g., it is a convenience sample
or involves patients from an arbitrary hospital), the target population
can be unclear. Often, the target population is a group of units who are
eligible for the treatment (or a subset thereof). Causal estimands are
defined by the target population to which they generalize.</p>
<p>The average treatment effect in the population (ATE) is the average
effect of the treatment for all units in the target population. The
average treatment effect in the treated (ATT) is the average effect of
the treatment for units like those who actually were treated. The most
common forms of matching are best suited for estimating the ATT, though
some are also available for estimating the ATE. Some matching methods
distort the sample in such a way that the estimated treatment effect
corresponds neither to the ATE nor to the ATT, but rather to the effect
in an unspecified population (sometimes called the ATM, or average
treatment effect in the remaining matched sample). When the target
population is not so important (e.g., in the case of treatment effect
discovery), such methods may be attractive; otherwise, care should be
taken in ensuring the effect generalizes to the target population of
interest. Different matching methods allow for different target
populations, so it is important to choose a matching method that allows
one to estimate the desired effect. See <span class="citation">Greifer
and Stuart (<a href="#ref-greiferChoosingEstimandWhen2021">2021</a>)</span> for
guidance on making this choice.</p>
<p><strong>Selecting covariates to balance.</strong> Selecting
covariates carefully is critical for ensuring the resulting treatment
effect estimate is free of confounding and can be validly interpreted as
a causal effect. To estimate total causal effects, all covariates must
be measured prior to treatment (or otherwise not be affected by the
treatment). Covariates should be those that cause variation in the
outcome and selection into treatment group; these are known as
confounding variables. See <span class="citation">VanderWeele (<a href="#ref-vanderweele2019">2019</a>)</span> for a guide on covariate
selection. Ideally these covariates are measured without error and are
free of missingness.</p>
</div>
<div class="section level2">
<h2 id="check-initial-imbalance">Check Initial Imbalance<a class="anchor" aria-label="anchor" href="#check-initial-imbalance"></a>
</h2>
<p>After planning and prior to matching, it can be a good idea to view
the initial imbalance in one’s data that matching is attempting to
eliminate. We can do this using the code below:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No matching; constructing a pre-match matchit object</span></span>
<span><span class="va">m.out0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> </span>
<span>                    <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>,</span>
<span>                  data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span>                  method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  distance <span class="op">=</span> <span class="st">"glm"</span><span class="op">)</span></span></code></pre></div>
<p>The first argument is a <code>formula</code> relating the treatment
to the covariates used in estimating the propensity score and for which
balance is to be assessed. The <code>data</code> argument specifies the
dataset where these variables exist. Typically, the <code>method</code>
argument specifies the method of matching to be performed; here, we set
it to <code>NULL</code> so we can assess balance prior to matching<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Note that the default for &lt;code&gt;method&lt;/code&gt; is
&lt;code&gt;"nearest"&lt;/code&gt; to perform nearest neighbor matching. To prevent
any matching from taking place in order to assess pre-matching
imbalance, &lt;code&gt;method&lt;/code&gt; must be set to &lt;code&gt;NULL&lt;/code&gt;.&lt;/p&gt;'><sup>1</sup></a>. The
<code>distance</code> argument specifies the method for estimating the
propensity score, a one-dimensional summary of all the included
covariates, computed as the predicted probability of being the treated
group given the covariates; here, we set it to <code>"glm"</code> for
generalized linear model, which implements logistic regression by
default<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Note that setting &lt;code&gt;distance = "logit"&lt;/code&gt;, which
was the default in &lt;code&gt;MatchIt&lt;/code&gt; version prior to 4.0.0, or
&lt;code&gt;"ps"&lt;/code&gt;, which was the default prior to version 4.5.0, will
also estimate logistic regression propensity scores. Because it is the
default, the &lt;code&gt;distance&lt;/code&gt; argument can actually be omitted if
logistic regression propensity scores are desired.&lt;/p&gt;'><sup>2</sup></a>
(see <code><a href="../reference/distance.html">?distance</a></code> for other options).</p>
<p>Below we assess balance on the unmatched data using
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Checking balance prior to matching</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## matchit(formula = treat ~ age + educ + race + married + nodegree + </span></span>
<span><span class="co">##     re74 + re75, data = lalonde, method = NULL, distance = "glm")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Summary of Balance for All Data:</span></span>
<span><span class="co">##            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max</span></span>
<span><span class="co">## distance          0.5774        0.1822          1.7941     0.9211    0.3774   0.6444</span></span>
<span><span class="co">## age              25.8162       28.0303         -0.3094     0.4400    0.0813   0.1577</span></span>
<span><span class="co">## educ             10.3459       10.2354          0.0550     0.4959    0.0347   0.1114</span></span>
<span><span class="co">## raceblack         0.8432        0.2028          1.7615          .    0.6404   0.6404</span></span>
<span><span class="co">## racehispan        0.0595        0.1422         -0.3498          .    0.0827   0.0827</span></span>
<span><span class="co">## racewhite         0.0973        0.6550         -1.8819          .    0.5577   0.5577</span></span>
<span><span class="co">## married           0.1892        0.5128         -0.8263          .    0.3236   0.3236</span></span>
<span><span class="co">## nodegree          0.7081        0.5967          0.2450          .    0.1114   0.1114</span></span>
<span><span class="co">## re74           2095.5737     5619.2365         -0.7211     0.5181    0.2248   0.4470</span></span>
<span><span class="co">## re75           1532.0553     2466.4844         -0.2903     0.9563    0.1342   0.2876</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Sample Sizes:</span></span>
<span><span class="co">##           Control Treated</span></span>
<span><span class="co">## All           429     185</span></span>
<span><span class="co">## Matched       429     185</span></span>
<span><span class="co">## Unmatched       0       0</span></span>
<span><span class="co">## Discarded       0       0</span></span></code></pre>
<p>We can see severe imbalances as measured by the standardized mean
differences (<code>Std. Mean Diff.</code>), variance ratios
(<code>Var. Ratio</code>), and empirical cumulative distribution
function (eCDF) statistics. Values of standardized mean differences and
eCDF statistics close to zero and values of variance ratios close to one
indicate good balance, and here many of them are far from their ideal
values.</p>
</div>
<div class="section level2">
<h2 id="matching">Matching<a class="anchor" aria-label="anchor" href="#matching"></a>
</h2>
<p>Now, matching can be performed. There are several different classes
and methods of matching, described in
<code><a href="../articles/matching-methods.html">vignette("matching-methods")</a></code>. Here, we begin by briefly
demonstrating 1:1 nearest neighbor (NN) matching on the propensity
score, which is appropriate for estimating the ATT. One by one, each
treated unit is paired with an available control unit that has the
closest propensity score to it. Any remaining control units are left
unmatched and excluded from further analysis. Due to the theoretical
balancing properties of the propensity score described by <span class="citation">Rosenbaum and Rubin (<a href="#ref-rosenbaum1983">1983</a>)</span>, propensity score matching
can be an effective way to achieve covariate balance in the treatment
groups. Below we demonstrate the use of <code><a href="../reference/matchit.html">matchit()</a></code> to
perform nearest neighbor propensity score matching.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1:1 NN PS matching w/o replacement</span></span>
<span><span class="va">m.out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> </span>
<span>                   <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>,</span>
<span>                  data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span>                  method <span class="op">=</span> <span class="st">"nearest"</span>,</span>
<span>                  distance <span class="op">=</span> <span class="st">"glm"</span><span class="op">)</span></span></code></pre></div>
<p>We use the same syntax as before, but this time specify
<code>method = "nearest"</code> to implement nearest neighbor matching,
again using a logistic regression propensity score. Many other arguments
are available for tuning the matching method and method of propensity
score estimation.</p>
<p>The matching outputs are contained in the <code>m.out1</code> object.
Printing this object gives a description of the type of matching
performed:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m.out1</span></span></code></pre></div>
<pre><code><span><span class="co">## A `matchit` object</span></span>
<span><span class="co">##  - method: 1:1 nearest neighbor matching without replacement</span></span>
<span><span class="co">##  - distance: Propensity score</span></span>
<span><span class="co">##              - estimated with logistic regression</span></span>
<span><span class="co">##  - number of obs.: 614 (original), 370 (matched)</span></span>
<span><span class="co">##  - target estimand: ATT</span></span>
<span><span class="co">##  - covariates: age, educ, race, married, nodegree, re74, re75</span></span></code></pre>
<p>The key components of the <code>m.out1</code> object are
<code>weights</code> (the computed matching weights),
<code>subclass</code> (matching pair membership), <code>distance</code>
(the estimated propensity score), and <code>match.matrix</code> (which
control units are matched to each treated unit). How these can be used
for estimating the effect of the treatment after matching is detailed in
<code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="assessing-the-quality-of-matches">Assessing the Quality of Matches<a class="anchor" aria-label="anchor" href="#assessing-the-quality-of-matches"></a>
</h2>
<p>Although matching on the propensity score is often effective at
eliminating differences between the treatment groups to achieve
covariate balance, its performance in this regard must be assessed. If
covariates remain imbalanced after matching, the matching is considered
unsuccessful, and a different matching specification should be tried.
<code>MatchIt</code> offers a few tools for the assessment of covariate
balance after matching. These include graphical and statistical methods.
More detail on the interpretation of the included plots and statistics
can be found in <code><a href="../articles/assessing-balance.html">vignette("assessing-balance")</a></code>.</p>
<p>In addition to covariate balance, the quality of the match is
determined by how many units remain after matching. Matching often
involves discarding units that are not paired with other units, and some
matching options, such as setting restrictions for common support or
calipers, can further decrease the number of remaining units. If, after
matching, the remaining sample size is small, the resulting effect
estimate may be imprecise. In many cases, there will be a trade-off
between balance and remaining sample size. How to optimally choose among
them is an instance of the fundamental bias-variance trade-off problem
that cannot be resolved without substantive knowledge of the phenomena
under study. Prospective power analyses can be used to determine how
small a sample can be before necessary precision is sacrificed.</p>
<p>To assess the quality of the resulting matches numerically, we can
use the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function on <code>m.out1</code> as
before. Here we set <code>un = FALSE</code> to suppress display of the
balance before matching for brevity and because we already saw it.
(Leaving it as <code>TRUE</code>, its default, would display balance
both before and after matching.)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Checking balance after NN matching</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out1</span>, un <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## matchit(formula = treat ~ age + educ + race + married + nodegree + </span></span>
<span><span class="co">##     re74 + re75, data = lalonde, method = "nearest", distance = "glm")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Summary of Balance for Matched Data:</span></span>
<span><span class="co">##            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max Std. Pair Dist.</span></span>
<span><span class="co">## distance          0.5774        0.3629          0.9739     0.7566    0.1321   0.4216          0.9740</span></span>
<span><span class="co">## age              25.8162       25.3027          0.0718     0.4568    0.0847   0.2541          1.3938</span></span>
<span><span class="co">## educ             10.3459       10.6054         -0.1290     0.5721    0.0239   0.0757          1.2474</span></span>
<span><span class="co">## raceblack         0.8432        0.4703          1.0259          .    0.3730   0.3730          1.0259</span></span>
<span><span class="co">## racehispan        0.0595        0.2162         -0.6629          .    0.1568   0.1568          1.0743</span></span>
<span><span class="co">## racewhite         0.0973        0.3135         -0.7296          .    0.2162   0.2162          0.8390</span></span>
<span><span class="co">## married           0.1892        0.2108         -0.0552          .    0.0216   0.0216          0.8281</span></span>
<span><span class="co">## nodegree          0.7081        0.6378          0.1546          .    0.0703   0.0703          1.0106</span></span>
<span><span class="co">## re74           2095.5737     2342.1076         -0.0505     1.3289    0.0469   0.2757          0.7965</span></span>
<span><span class="co">## re75           1532.0553     1614.7451         -0.0257     1.4956    0.0452   0.2054          0.7381</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Sample Sizes:</span></span>
<span><span class="co">##           Control Treated</span></span>
<span><span class="co">## All           429     185</span></span>
<span><span class="co">## Matched       185     185</span></span>
<span><span class="co">## Unmatched     244       0</span></span>
<span><span class="co">## Discarded       0       0</span></span></code></pre>
<p>At the top is a summary of covariate balance after matching. Although
balance has improved for some covariates, in general balance is still
quite poor, indicating that nearest neighbor propensity score matching
is not sufficient for removing confounding in this dataset. The final
column, <code>Std. Pair Diff</code>, displays the average absolute
within-pair difference of each covariate. When these values are small,
better balance is typically achieved and estimated effects are more
robust to misspecification of the outcome model <span class="citation">(<a href="#ref-king2019">King and Nielsen 2019</a>; <a href="#ref-rubin1973a">Rubin 1973</a>)</span>.</p>
<p>Next is a table of the sample sizes before and after matching. The
matching procedure left 244 control units unmatched. Ideally, unmatched
units would be those far from the treated units and would require
greater extrapolation were they to have been retained. We can visualize
the distribution of propensity scores of those who were matched using
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> with <code>type = "jitter"</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">m.out1</span>, type <span class="op">=</span> <span class="st">"jitter"</span>, interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="MatchIt_files/figure-html/unnamed-chunk-7-1.png" alt="Jitter plot of the propensity scores, which shows that no treated unit were dropped, and a large number of control units with low propensity scores were dropped." width="672" style="display: block; margin: auto;"></p>
<p>We can visually examine balance on the covariates using
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> with <code>type = "density"</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">m.out1</span>, type <span class="op">=</span> <span class="st">"density"</span>, interactive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>     which.xs <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re75</span><span class="op">)</span></span></code></pre></div>
<p><img src="MatchIt_files/figure-html/unnamed-chunk-8-1.png" alt="Density plots of age, married and re75 in the unmatched and matched samples." width="672" style="display: block; margin: auto;"></p>
<p>Imbalances are represented by the differences between the black
(treated) and gray (control) distributions. Although
<code>married</code> and <code>re75</code> appear to have improved
balance after matching, the case is mixed for <code>age</code>.</p>
<div class="section level3">
<h3 id="trying-a-different-matching-specification">Trying a Different Matching Specification<a class="anchor" aria-label="anchor" href="#trying-a-different-matching-specification"></a>
</h3>
<p>Given the poor performance of nearest neighbor matching in this
example, we can try a different matching method or make other changes to
the matching algorithm or distance specification. Below, we’ll try full
matching, which matches every treated unit to at least one control and
every control to at least one treated unit <span class="citation">(<a href="#ref-hansen2004">Hansen 2004</a>; <a href="#ref-stuart2008a">Stuart and Green 2008</a>)</span>. We’ll also
try a different link (probit) for the propensity score model.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Full matching on a probit PS</span></span>
<span><span class="va">m.out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> </span>
<span>                   <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>,</span>
<span>                  data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span>                  method <span class="op">=</span> <span class="st">"full"</span>,</span>
<span>                  distance <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>                  link <span class="op">=</span> <span class="st">"probit"</span><span class="op">)</span></span>
<span><span class="va">m.out2</span></span></code></pre></div>
<pre><code><span><span class="co">## A `matchit` object</span></span>
<span><span class="co">##  - method: Optimal full matching</span></span>
<span><span class="co">##  - distance: Propensity score</span></span>
<span><span class="co">##              - estimated with probit regression</span></span>
<span><span class="co">##  - number of obs.: 614 (original), 614 (matched)</span></span>
<span><span class="co">##  - target estimand: ATT</span></span>
<span><span class="co">##  - covariates: age, educ, race, married, nodegree, re74, re75</span></span></code></pre>
<p>We can examine balance on this new matching specification.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Checking balance after full matching</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out2</span>, un <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## matchit(formula = treat ~ age + educ + race + married + nodegree + </span></span>
<span><span class="co">##     re74 + re75, data = lalonde, method = "full", distance = "glm", </span></span>
<span><span class="co">##     link = "probit")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Summary of Balance for Matched Data:</span></span>
<span><span class="co">##            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max Std. Pair Dist.</span></span>
<span><span class="co">## distance          0.5773        0.5764          0.0045     0.9949    0.0043   0.0486          0.0198</span></span>
<span><span class="co">## age              25.8162       25.5347          0.0393     0.4790    0.0787   0.2742          1.2843</span></span>
<span><span class="co">## educ             10.3459       10.5381         -0.0956     0.6192    0.0253   0.0730          1.2179</span></span>
<span><span class="co">## raceblack         0.8432        0.8389          0.0119          .    0.0043   0.0043          0.0162</span></span>
<span><span class="co">## racehispan        0.0595        0.0492          0.0435          .    0.0103   0.0103          0.4412</span></span>
<span><span class="co">## racewhite         0.0973        0.1119         -0.0493          .    0.0146   0.0146          0.3454</span></span>
<span><span class="co">## married           0.1892        0.1633          0.0660          .    0.0259   0.0259          0.4473</span></span>
<span><span class="co">## nodegree          0.7081        0.6577          0.1110          .    0.0504   0.0504          0.9872</span></span>
<span><span class="co">## re74           2095.5737     2100.2150         -0.0009     1.3467    0.0314   0.1881          0.8387</span></span>
<span><span class="co">## re75           1532.0553     1561.4420         -0.0091     1.5906    0.0536   0.1984          0.8240</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Sample Sizes:</span></span>
<span><span class="co">##               Control Treated</span></span>
<span><span class="co">## All            429.       185</span></span>
<span><span class="co">## Matched (ESS)   50.76     185</span></span>
<span><span class="co">## Matched        429.       185</span></span>
<span><span class="co">## Unmatched        0.         0</span></span>
<span><span class="co">## Discarded        0.         0</span></span></code></pre>
<p>Balance is far better, as determined by the lower standardized mean
differences and eCDF statistics. The balance should be reported when
publishing the results of a matching analysis. This can be done either
in a table, using the values resulting from <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, or
in a plot, such as a Love plot, which we can make by calling
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> on the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> output:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="MatchIt_files/figure-html/unnamed-chunk-12-1.png" alt="A love plot with matched dots below the threshold lines, indicaitng good balance after matching, in contrast to the unmatched dots far from the treshold lines, indicating poor balance before matching." width="672" style="display: block; margin: auto;"></p>
<p>Love plots are a simple and straightforward way to summarize balance
visually. See <code><a href="../articles/assessing-balance.html">vignette("assessing-balance")</a></code> for more
information on how to customize <code>MatchIt</code>’s Love plot and how
to use <code>cobalt</code>, a package designed specifically for balance
assessment and reporting that is compatible with
<code>MatchIt</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="estimating-the-treatment-effect">Estimating the Treatment Effect<a class="anchor" aria-label="anchor" href="#estimating-the-treatment-effect"></a>
</h2>
<p>How treatment effects are estimated depends on what form of matching
was performed. See <code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code> for
information on how to estimate treatment effects in a variety of
scenarios (i.e., different matching methods and outcome types). After
full matching and most other matching methods, we can run a regression
of the outcome on the treatment and covariates in the matched sample
(i.e., including the matching weights) and estimate the treatment effect
using g-computation as implemented in
<code><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">marginaleffects::avg_comparisons()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;In some cases, the coefficient on the treatment variable
in the outcome model can be used as the effect estimate, but
g-computation always yields a valid effect estimate regardless of the
form of the outcome model and its use is the same regardless of the
outcome model type or matching method (with some slight variations), so
we always recommend performing g-computation after fitting the outcome
model. G-computation is explained in detail in
&lt;code&gt;&lt;a href="../articles/estimating-effects.html"&gt;vignette("estimating-effects")&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;'><sup>3</sup></a>. Including the
covariates used in the matching in the effect estimation can provide
additional robustness to slight imbalances remaining after matching and
can improve precision.</p>
<p>Because full matching was successful at balancing the covariates,
we’ll demonstrate here how to estimate a treatment effect after
performing such an analysis. First, we’ll extract the matched dataset
from the <code>matchit</code> object using <code><a href="../reference/match_data.html">match_data()</a></code>.
This dataset only contains the matched units and adds columns for
<code>distance</code>, <code>weights</code>, and <code>subclass</code>
(described previously).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/match_data.html">match_data</a></span><span class="op">(</span><span class="va">m.out2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">m.data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      treat age educ   race married nodegree re74 re75       re78  distance weights subclass</span></span>
<span><span class="co">## NSW1     1  37   11  black       1        1    0    0  9930.0460 0.6356769       1        1</span></span>
<span><span class="co">## NSW2     1  22    9 hispan       0        1    0    0  3595.8940 0.2298151       1       55</span></span>
<span><span class="co">## NSW3     1  30   12  black       0        0    0    0 24909.4500 0.6813558       1       63</span></span>
<span><span class="co">## NSW4     1  27   11  black       0        1    0    0  7506.1460 0.7690590       1       70</span></span>
<span><span class="co">## NSW5     1  33    8  black       0        1    0    0   289.7899 0.6954138       1       79</span></span>
<span><span class="co">## NSW6     1  22    9  black       0        1    0    0  4056.4940 0.6943658       1       86</span></span></code></pre>
<p>We can then model the outcome in this dataset using the standard
regression functions in R, like <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> or <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code>,
being sure to include the matching weights (stored in the
<code>weights</code> variable of the <code><a href="../reference/match_data.html">match_data()</a></code> output)
in the estimation<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;With 1:1 nearest neighbor matching without replacement,
excluding the matching weights does not change the estimates. For all
other forms of matching, they are required, so we recommend always
including them for consistency.&lt;/p&gt;"><sup>4</sup></a>. Finally, we use
<code><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">marginaleffects::avg_comparisons()</a></code> to perform g-computation
to estimate the ATT. We recommend using cluster-robust standard errors
for most analyses, with pair membership as the clustering variable;
<code><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">avg_comparisons()</a></code> makes this straightforward.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://marginaleffects.com/" class="external-link">"marginaleffects"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">re78</span> <span class="op">~</span> <span class="va">treat</span> <span class="op">*</span> <span class="op">(</span><span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span>
<span>                            <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span><span class="op">)</span>,</span>
<span>          data <span class="op">=</span> <span class="va">m.data</span>,</span>
<span>          weights <span class="op">=</span> <span class="va">weights</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">avg_comparisons</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>                variables <span class="op">=</span> <span class="st">"treat"</span>,</span>
<span>                vcov <span class="op">=</span> <span class="op">~</span><span class="va">subclass</span>,</span>
<span>                newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Estimate Std. Error    z Pr(&gt;|z|)   S 2.5 % 97.5 %</span></span>
<span><span class="co">##      1977        704 2.81  0.00501 7.6   596   3357</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Term: treat</span></span>
<span><span class="co">## Type:  response </span></span>
<span><span class="co">## Comparison: 1 - 0</span></span></code></pre>
<p>The outcome model coefficients and tests should not be interpreted or
reported. See <code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code> for more
information on how to estimate effects and standard errors with
different forms of matching and with different outcome types.</p>
<p>A benefit of matching is that the outcome model used to estimate the
treatment effect is robust to misspecification when balance has been
achieved. With full matching, we were able to achieve balance, so the
effect estimate should depend less on the form of the outcome model used
than had we used 1:1 matching without replacement or no matching at
all.</p>
</div>
<div class="section level2">
<h2 id="reporting-results">Reporting Results<a class="anchor" aria-label="anchor" href="#reporting-results"></a>
</h2>
<p>To report matching results in a manuscript or research report, a few
key pieces of information are required. One should be as detailed as
possible about the matching procedure and the decisions made to ensure
the analysis is replicable and can be adequately assessed for soundness
by the audience. Key pieces of information to include are 1) the
matching specification used (including the method and any additional
options, like calipers or common support restrictions), 2) the distance
measure used (including how it was estimated e.g., using logistic
regression for propensity scores), 3) which other matching methods were
tried prior to settling on a final specification and how the choices
were made, 4) the balance of the final matching specification (including
standardized mean differences and other balance statistics for the
variables, their powers, and their interactions; some of these can be
reported as summaries rather than in full detail), 5) the number of
matched, unmatched, and discarded units included in the effect
estimation, and 6) the method of estimating the treatment effect and
standard error or confidence interval (including the specific model used
and the specific type of standard error). See <span class="citation">Thoemmes and Kim (<a href="#ref-thoemmes2011">2011</a>)</span> for a complete list of
specific details to report. Below is an example of how we might write up
the prior analysis:</p>
<blockquote>
<p>We used propensity score matching to estimate the average marginal
effect of the treatment on 1978 earnings on those who received it
accounting for confounding by the included covariates. We first
attempted 1:1 nearest neighbor propensity score matching without
replacement with a propensity score estimated using logistic regression
of the treatment on the covariates. This matching specification yielded
poor balance, so we instead tried full matching on the propensity score,
which yielded adequate balance, as indicated in Table 1 and Figure 1.
The propensity score was estimated using a probit regression of the
treatment on the covariates, which yielded better balance than did a
logistic regression. After matching, all standardized mean differences
for the covariates were below 0.1 and all standardized mean differences
for squares and two-way interactions between covariates were below .15,
indicating adequate balance. Full matching uses all treated and all
control units, so no units were discarded by the matching.</p>
<p>To estimate the treatment effect and its standard error, we fit a
linear regression model with 1978 earnings as the outcome and the
treatment, covariates, and their interaction as predictors and included
the full matching weights in the estimation. The <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>
function was used to fit the outcome, and the
<code><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">avg_comparisons()</a></code> function in the
<code>marginaleffects</code> package was used to perform g-computation
in the matched sample to estimate the ATT. A cluster-robust variance was
used to estimate its standard error with matching stratum membership as
the clustering variable.</p>
<p>The estimated effect was $1977 (SE = 704.3, p = 0.005), indicating
that the average effect of the treatment for those who received it is to
increase earnings.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Although we have covered the basics of performing a matching analysis
here, to use matching to its full potential, the more advanced methods
available in <code>MatchIt</code> should be considered. We recommend
reading the other vignettes included here to gain a better understand of
all the <code>MatchIt</code> has to offer and how to use it responsibly
and effectively. As previously stated, the ease of using
<code>MatchIt</code> does not imply that matching or causal inference in
general are simple matters; matching is an advanced statistical
technique that should be used with care and caution. We hope the
capabilities of <code>MatchIt</code> ease and encourage the use of
nonparametric preprocessing for estimating causal effects in a robust
and well-justified way.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-austin2011b" class="csl-entry">
Austin, Peter C. 2011. <span>“An Introduction to Propensity Score
Methods for Reducing the Effects of Confounding in Observational
Studies.”</span> <em>Multivariate Behavioral Research</em> 46 (3):
399–424. <a href="https://doi.org/10.1080/00273171.2011.568786" class="external-link">https://doi.org/10.1080/00273171.2011.568786</a>.
</div>
<div id="ref-greiferChoosingEstimandWhen2021" class="csl-entry">
Greifer, Noah, and Elizabeth A. Stuart. 2021. <span>“Choosing the
<span>Estimand When Matching</span> or <span>Weighting</span> in
<span>Observational Studies</span>.”</span> <em>arXiv:2106.10577
[Stat]</em>, June. <a href="https://arxiv.org/abs/2106.10577" class="external-link">https://arxiv.org/abs/2106.10577</a>.
</div>
<div id="ref-hansen2004" class="csl-entry">
Hansen, Ben B. 2004. <span>“Full Matching in an Observational Study of
Coaching for the SAT.”</span> <em>Journal of the American Statistical
Association</em> 99 (467): 609–18. <a href="https://doi.org/10.1198/016214504000000647" class="external-link">https://doi.org/10.1198/016214504000000647</a>.
</div>
<div id="ref-ho2007" class="csl-entry">
Ho, Daniel E., Kosuke Imai, Gary King, and Elizabeth A. Stuart. 2007.
<span>“Matching as Nonparametric Preprocessing for Reducing Model
Dependence in Parametric Causal Inference.”</span> <em>Political
Analysis</em> 15 (3): 199–236. <a href="https://doi.org/10.1093/pan/mpl013" class="external-link">https://doi.org/10.1093/pan/mpl013</a>.
</div>
<div id="ref-king2019" class="csl-entry">
King, Gary, and Richard Nielsen. 2019. <span>“Why Propensity Scores
Should Not Be Used for Matching.”</span> <em>Political Analysis</em>,
May, 1–20. <a href="https://doi.org/10.1017/pan.2019.11" class="external-link">https://doi.org/10.1017/pan.2019.11</a>.
</div>
<div id="ref-rosenbaum1983" class="csl-entry">
Rosenbaum, Paul R., and Donald B. Rubin. 1983. <span>“The Central Role
of the Propensity Score in Observational Studies for Causal
Effects.”</span> <em>Biometrika</em> 70 (1): 41–55. <a href="https://doi.org/10.1093/biomet/70.1.41" class="external-link">https://doi.org/10.1093/biomet/70.1.41</a>.
</div>
<div id="ref-rubin1973a" class="csl-entry">
Rubin, Donald B. 1973. <span>“Matching to Remove Bias in Observational
Studies.”</span> <em>Biometrics</em> 29 (1): 159. <a href="https://doi.org/10.2307/2529684" class="external-link">https://doi.org/10.2307/2529684</a>.
</div>
<div id="ref-stuart2010" class="csl-entry">
Stuart, Elizabeth A. 2010. <span>“Matching Methods for Causal Inference:
A Review and a Look Forward.”</span> <em>Statistical Science</em> 25
(1): 1–21. <a href="https://doi.org/10.1214/09-STS313" class="external-link">https://doi.org/10.1214/09-STS313</a>.
</div>
<div id="ref-stuart2008a" class="csl-entry">
Stuart, Elizabeth A., and Kerry M. Green. 2008. <span>“Using Full
Matching to Estimate Causal Effects in Nonexperimental Studies:
Examining the Relationship Between Adolescent Marijuana Use and Adult
Outcomes.”</span> <em>Developmental Psychology</em> 44 (2): 395–406. <a href="https://doi.org/10.1037/0012-1649.44.2.395" class="external-link">https://doi.org/10.1037/0012-1649.44.2.395</a>.
</div>
<div id="ref-thoemmes2011" class="csl-entry">
Thoemmes, Felix J., and Eun Sook Kim. 2011. <span>“A Systematic Review
of Propensity Score Methods in the Social Sciences.”</span>
<em>Multivariate Behavioral Research</em> 46 (1): 90–118. <a href="https://doi.org/10.1080/00273171.2011.540475" class="external-link">https://doi.org/10.1080/00273171.2011.540475</a>.
</div>
<div id="ref-vanderweele2019" class="csl-entry">
VanderWeele, Tyler J. 2019. <span>“Principles of Confounder
Selection.”</span> <em>European Journal of Epidemiology</em> 34 (3):
211–19. <a href="https://doi.org/10.1007/s10654-019-00494-6" class="external-link">https://doi.org/10.1007/s10654-019-00494-6</a>.
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Ho, Kosuke Imai, Gary King, Elizabeth Stuart, Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
