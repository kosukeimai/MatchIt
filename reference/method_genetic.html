<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Genetic Matching — method_genetic • MatchIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Genetic Matching — method_genetic"><meta name="description" content='In matchit(), setting method = "genetic" performs genetic matching.
Genetic matching is a form of nearest neighbor matching where distances are
computed as the generalized Mahalanobis distance, which is a generalization
of the Mahalanobis distance with a scaling factor for each covariate that
represents the importance of that covariate to the distance. A genetic
algorithm is used to select the scaling factors. The scaling factors are
chosen as those which maximize a criterion related to covariate balance,
which can be chosen, but which by default is the smallest p-value in
covariate balance tests among the covariates. This method relies on and is a
wrapper for MatchingGenMatch and MatchingMatch, which use
rgenoudgenoud to perform the optimization using the genetic
algorithm.
This page details the allowable arguments with method = "genetic".
See matchit() for an explanation of what each argument means in a general
context and how it can be specified.
Below is how matchit() is used for genetic matching:
matchit(formula,
        data = NULL,
        method = "genetic",
        distance = "glm",
        link = "logit",
        distance.options = list(),
        estimand = "ATT",
        exact = NULL,
        mahvars = NULL,
        antiexact = NULL,
        discard = "none",
        reestimate = FALSE,
        s.weights = NULL,
        replace = FALSE,
        m.order = NULL,
        caliper = NULL,
        ratio = 1,
        verbose = FALSE,
        ...)
'><meta property="og:description" content='In matchit(), setting method = "genetic" performs genetic matching.
Genetic matching is a form of nearest neighbor matching where distances are
computed as the generalized Mahalanobis distance, which is a generalization
of the Mahalanobis distance with a scaling factor for each covariate that
represents the importance of that covariate to the distance. A genetic
algorithm is used to select the scaling factors. The scaling factors are
chosen as those which maximize a criterion related to covariate balance,
which can be chosen, but which by default is the smallest p-value in
covariate balance tests among the covariates. This method relies on and is a
wrapper for MatchingGenMatch and MatchingMatch, which use
rgenoudgenoud to perform the optimization using the genetic
algorithm.
This page details the allowable arguments with method = "genetic".
See matchit() for an explanation of what each argument means in a general
context and how it can be specified.
Below is how matchit() is used for genetic matching:
matchit(formula,
        data = NULL,
        method = "genetic",
        distance = "glm",
        link = "logit",
        distance.options = list(),
        estimand = "ATT",
        exact = NULL,
        mahvars = NULL,
        antiexact = NULL,
        discard = "none",
        reestimate = FALSE,
        s.weights = NULL,
        replace = FALSE,
        m.order = NULL,
        caliper = NULL,
        ratio = 1,
        verbose = FALSE,
        ...)
'><meta property="og:image" content="https://kosukeimai.github.io/MatchIt/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MatchIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/MatchIt.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/matching-methods.html">Matching Methods</a></li>
    <li><a class="dropdown-item" href="../articles/assessing-balance.html">Assessing Balance</a></li>
    <li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Matching</a></li>
    <li><a class="dropdown-item" href="../articles/sampling-weights.html">Matching with Sampling Weights</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kosukeimai/MatchIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Genetic Matching</h1>
      <small class="dont-index">Source: <a href="https://github.com/kosukeimai/MatchIt/blob/master/R/matchit2genetic.R" class="external-link"><code>R/matchit2genetic.R</code></a></small>
      <div class="d-none name"><code>method_genetic.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In <code><a href="matchit.html">matchit()</a></code>, setting <code>method = "genetic"</code> performs genetic matching.
Genetic matching is a form of nearest neighbor matching where distances are
computed as the generalized Mahalanobis distance, which is a generalization
of the Mahalanobis distance with a scaling factor for each covariate that
represents the importance of that covariate to the distance. A genetic
algorithm is used to select the scaling factors. The scaling factors are
chosen as those which maximize a criterion related to covariate balance,
which can be chosen, but which by default is the smallest p-value in
covariate balance tests among the covariates. This method relies on and is a
wrapper for MatchingGenMatch and MatchingMatch, which use
rgenoudgenoud to perform the optimization using the genetic
algorithm.</p>
<p>This page details the allowable arguments with <code>method = "genetic"</code>.
See <code><a href="matchit.html">matchit()</a></code> for an explanation of what each argument means in a general
context and how it can be specified.</p>
<p>Below is how <code><a href="matchit.html">matchit()</a></code> is used for genetic matching:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="fu"><a href="../reference/matchit.html">matchit</a></span><span class="op">(</span><span class="va">formula</span>,</span>
<span>        data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        method <span class="op">=</span> <span class="st">"genetic"</span>,</span>
<span>        distance <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>        link <span class="op">=</span> <span class="st">"logit"</span>,</span>
<span>        distance.options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        estimand <span class="op">=</span> <span class="st">"ATT"</span>,</span>
<span>        exact <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        mahvars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        antiexact <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        discard <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        reestimate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        s.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        m.order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        caliper <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        ratio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        <span class="va">...</span><span class="op">)</span> </span></code></pre></div>

    </div>


    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>a two-sided <a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a> object containing the treatment and
covariates to be used in creating the distance measure used in the matching.
This formula will be supplied to the functions that estimate the distance
measure and is used to determine the covariates whose balance is to be
optimized.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame containing the variables named in <code>formula</code>.
If not found in <code>data</code>, the variables will be sought in the
environment.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>set here to <code>"genetic"</code>.</p></dd>


<dt id="arg-distance">distance<a class="anchor" aria-label="anchor" href="#arg-distance"></a></dt>
<dd><p>the distance measure to be used. See <code><a href="distance.html">distance</a></code>
for allowable options. When set to a method of estimating propensity scores
or a numeric vector of distance values, the distance measure is included
with the covariates in <code>formula</code> to be supplied to the generalized
Mahalanobis distance matrix unless <code>mahvars</code> is specified. Otherwise,
only the covariates in <code>formula</code> are supplied to the generalized
Mahalanobis distance matrix to have their scaling factors chosen.
<code>distance</code> <em>cannot</em> be supplied as a distance matrix. Supplying
any method of computing a distance matrix (e.g., <code>"mahalanobis"</code>) has
the same effect of omitting propensity score but does not affect how the
distance between units is computed otherwise.</p></dd>


<dt id="arg-link">link<a class="anchor" aria-label="anchor" href="#arg-link"></a></dt>
<dd><p>when <code>distance</code> is specified as a method of estimating
propensity scores, an additional argument controlling the link function used
in estimating the distance measure. See <code><a href="distance.html">distance</a></code> for allowable
options with each option.</p></dd>


<dt id="arg-distance-options">distance.options<a class="anchor" aria-label="anchor" href="#arg-distance-options"></a></dt>
<dd><p>a named list containing additional arguments
supplied to the function that estimates the distance measure as determined
by the argument to <code>distance</code>.</p></dd>


<dt id="arg-estimand">estimand<a class="anchor" aria-label="anchor" href="#arg-estimand"></a></dt>
<dd><p>a string containing the desired estimand. Allowable options
include <code>"ATT"</code> and <code>"ATC"</code>. See Details.</p></dd>


<dt id="arg-exact">exact<a class="anchor" aria-label="anchor" href="#arg-exact"></a></dt>
<dd><p>for which variables exact matching should take place.</p></dd>


<dt id="arg-mahvars">mahvars<a class="anchor" aria-label="anchor" href="#arg-mahvars"></a></dt>
<dd><p>when a distance corresponds to a propensity score (e.g., for
caliper matching or to discard units for common support), which covariates
should be supplied to the generalized Mahalanobis distance matrix for
matching. If unspecified, all variables in <code>formula</code> will be supplied
to the distance matrix. Use <code>mahvars</code> to only supply a subset. Even if
<code>mahvars</code> is specified, balance will be optimized on all covariates in
<code>formula</code>. See Details.</p></dd>


<dt id="arg-antiexact">antiexact<a class="anchor" aria-label="anchor" href="#arg-antiexact"></a></dt>
<dd><p>for which variables anti-exact matching should take place.
Anti-exact matching is processed using the <code>restrict</code> argument to
<code><a href="https://rdrr.io/pkg/Matching/man/GenMatch.html" class="external-link">Matching::GenMatch()</a></code> and <code><a href="https://rdrr.io/pkg/Matching/man/Match.html" class="external-link">Matching::Match()</a></code>.</p></dd>


<dt id="arg-discard">discard<a class="anchor" aria-label="anchor" href="#arg-discard"></a></dt>
<dd><p>a string containing a method for discarding units outside a
region of common support. Only allowed when <code>distance</code> corresponds to a
propensity score.</p></dd>


<dt id="arg-reestimate">reestimate<a class="anchor" aria-label="anchor" href="#arg-reestimate"></a></dt>
<dd><p>if <code>discard</code> is not <code>"none"</code>, whether to
re-estimate the propensity score in the remaining sample prior to matching.</p></dd>


<dt id="arg-s-weights">s.weights<a class="anchor" aria-label="anchor" href="#arg-s-weights"></a></dt>
<dd><p>the variable containing sampling weights to be incorporated
into propensity score models and balance statistics. These are also supplied
to <code>GenMatch()</code> for use in computing the balance t-test p-values in the
process of matching.</p></dd>


<dt id="arg-replace">replace<a class="anchor" aria-label="anchor" href="#arg-replace"></a></dt>
<dd><p>whether matching should be done with replacement.</p></dd>


<dt id="arg-m-order">m.order<a class="anchor" aria-label="anchor" href="#arg-m-order"></a></dt>
<dd><p>the order that the matching takes place. Allowable options
include <code>"largest"</code>, where matching takes place in descending order of
distance measures; <code>"smallest"</code>, where matching takes place in ascending
order of distance measures; <code>"random"</code>, where matching takes place
in a random order; and <code>"data"</code> where matching takes place based on the
order of units in the data. When <code>m.order = "random"</code>, results may differ
across different runs of the same code unless a seed is set and specified
with <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>. The default of <code>NULL</code> corresponds to <code>"largest"</code> when a
propensity score is estimated or supplied as a vector and <code>"data"</code>
otherwise.</p></dd>


<dt id="arg-caliper">caliper<a class="anchor" aria-label="anchor" href="#arg-caliper"></a></dt>
<dd><p>the width(s) of the caliper(s) used for caliper matching. See
Details and Examples.</p></dd>


<dt id="arg-std-caliper">std.caliper<a class="anchor" aria-label="anchor" href="#arg-std-caliper"></a></dt>
<dd><p><code>logical</code>; when calipers are specified, whether they
are in standard deviation units (<code>TRUE</code>) or raw units (<code>FALSE</code>).</p></dd>


<dt id="arg-ratio">ratio<a class="anchor" aria-label="anchor" href="#arg-ratio"></a></dt>
<dd><p>how many control units should be matched to each treated unit
for k:1 matching. Should be a single integer value.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code>; whether information about the matching
process should be printed to the console. When <code>TRUE</code>, output from
<code>GenMatch()</code> with <code>print.level = 2</code> will be displayed. Default is
<code>FALSE</code> for no printing other than warnings.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed to MatchingGenMatch.
Potentially useful options include <code>pop.size</code>, <code>max.generations</code>,
and <code>fit.func</code>. If <code>pop.size</code> is not specified, a warning from
<em>Matching</em> will be thrown reminding you to change it. Note that the
<code>ties</code> and <code>CommonSupport</code> arguments are set to <code>FALSE</code> and
cannot be changed. If <code>distance.tolerance</code> is not specified, it is set
to 0, whereas the default in <em>Matching</em> is 1e-5.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In genetic matching, covariates play three roles: 1) as the variables on
which balance is optimized, 2) as the variables in the generalized
Mahalanobis distance between units, and 3) in estimating the propensity
score. Variables supplied to <code>formula</code> are always used for role (1), as
the variables on which balance is optimized. When <code>distance</code>
corresponds to a propensity score, the covariates are also used to estimate
the propensity score (unless it is supplied). When <code>mahvars</code> is
specified, the named variables will form the covariates that go into the
distance matrix. Otherwise, the variables in <code>formula</code> along with the
propensity score will go into the distance matrix. This leads to three ways
to use <code>distance</code> and <code>mahvars</code> to perform the matching:</p>
<ol><li><p>When <code>distance</code> corresponds to a propensity score and <code>mahvars</code>
<em>is not</em> specified, the covariates in <code>formula</code> along with the
propensity score are used to form the generalized Mahalanobis distance
matrix. This is the default and most typical use of <code>method = "genetic"</code> in <code><a href="matchit.html">matchit()</a></code>.</p></li>
<li><p>When <code>distance</code> corresponds to a propensity score and <code>mahvars</code>
<em>is</em> specified, the covariates in <code>mahvars</code> are used to form the
generalized Mahalanobis distance matrix. The covariates in <code>formula</code>
are used to estimate the propensity score and have their balance optimized
by the genetic algorithm. The propensity score is not included in the
generalized Mahalanobis distance matrix.</p></li>
<li><p>When <code>distance</code> is a method of computing a distance matrix
(e.g.,<code>"mahalanobis"</code>), no propensity score is estimated, and the
covariates in <code>formula</code> are used to form the generalized Mahalanobis
distance matrix. Which specific method is supplied has no bearing on how the
distance matrix is computed; it simply serves as a signal to omit estimation
of a propensity score.</p></li>
</ol><p>When a caliper is specified, any variables mentioned in <code>caliper</code>,
possibly including the propensity score, will be added to the matching
variables used to form the generalized Mahalanobis distance matrix. This is
because <em>Matching</em> doesn't allow for the separation of caliper
variables and matching variables in genetic matching.</p><div class="section">
<h3 id="estimand">Estimand<a class="anchor" aria-label="anchor" href="#estimand"></a></h3>


<p>The <code>estimand</code> argument controls whether control
units are selected to be matched with treated units (<code>estimand = "ATT"</code>) or treated units are selected to be matched with control units
(<code>estimand = "ATC"</code>). The "focal" group (e.g., the treated units for
the ATT) is typically made to be the smaller treatment group, and a warning
will be thrown if it is not set that way unless <code>replace = TRUE</code>.
Setting <code>estimand = "ATC"</code> is equivalent to swapping all treated and
control labels for the treatment variable. When <code>estimand = "ATC"</code>, the
default <code>m.order</code> is <code>"smallest"</code>, and the <code>match.matrix</code>
component of the output will have the names of the control units as the
rownames and be filled with the names of the matched treated units (opposite
to when <code>estimand = "ATT"</code>). Note that the argument supplied to
<code>estimand</code> doesn't necessarily correspond to the estimand actually
targeted; it is merely a switch to trigger which treatment group is
considered "focal". Note that while <code>GenMatch()</code> and <code>Match()</code>
support the ATE as an estimand, <code><a href="matchit.html">matchit()</a></code> only supports the ATT and
ATC for genetic matching.</p>
</div>

<div class="section">
<h3 id="reproducibility">Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a></h3>


<p>Genetic matching involves a random component, so a seed must be set using <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> to ensure reproducibility. When <code>cluster</code> is used for parallel processing, the seed must be compatible with parallel processing (e.g., by setting <code>type = "L'Ecuyer-CMRG"</code>).</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a></h2>


<p>All outputs described in <code><a href="matchit.html">matchit()</a></code> are returned with
<code>method = "genetic"</code>. When <code>replace = TRUE</code>, the <code>subclass</code>
component is omitted. When <code>include.obj = TRUE</code> in the call to
<code><a href="matchit.html">matchit()</a></code>, the output of the call to MatchingGenMatch will be
included in the output.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>In a manuscript, be sure to cite the following papers if using
<code><a href="matchit.html">matchit()</a></code> with <code>method = "genetic"</code>:</p>
<p>Diamond, A., &amp; Sekhon, J. S. (2013). Genetic matching for estimating causal
effects: A general multivariate matching method for achieving balance in
observational studies. Review of Economics and Statistics, 95(3), 932–945. <a href="https://doi.org/10.1162/REST_a_00318" class="external-link">doi:10.1162/REST_a_00318</a></p>
<p>Sekhon, J. S. (2011). Multivariate and Propensity Score Matching Software
with Automated Balance Optimization: The Matching package for R. Journal of
Statistical Software, 42(1), 1–52. <a href="https://doi.org/10.18637/jss.v042.i07" class="external-link">doi:10.18637/jss.v042.i07</a></p>
<p>For example, a sentence might read:</p>
<p><em>Genetic matching was performed using the MatchIt package (Ho, Imai,
King, &amp; Stuart, 2011) in R, which calls functions from the Matching package
(Diamond &amp; Sekhon, 2013; Sekhon, 2011).</em></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="matchit.html">matchit()</a></code> for a detailed explanation of the inputs and outputs of
a call to <code><a href="matchit.html">matchit()</a></code>.</p>
<p>MatchingGenMatch and MatchingMatch, which do the work.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1:1 genetic matching with PS as a covariate</span></span></span>
<span class="r-in"><span><span class="va">m.out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">nodegree</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                    <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                  method <span class="op">=</span> <span class="st">"genetic"</span>,</span></span>
<span class="r-in"><span>                  pop.size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co">#use much larger pop.size</span></span></span>
<span class="r-in"><span><span class="va">m.out1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A `matchit` object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: 1:1 genetic matching without replacement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - distance: Propensity score             - estimated with logistic regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614 (original), 370 (matched)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - target estimand: ATT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, race, nodegree, married, re74, re75</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matchit(formula = treat ~ age + educ + race + nodegree + married + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     re74 + re75, data = lalonde, method = "genetic", pop.size = 10)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Balance for All Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance          0.5774        0.1822          1.7941     0.9211    0.3774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age              25.8162       28.0303         -0.3094     0.4400    0.0813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ             10.3459       10.2354          0.0550     0.4959    0.0347</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack         0.8432        0.2028          1.7615          .    0.6404</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan        0.0595        0.1422         -0.3498          .    0.0827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite         0.0973        0.6550         -1.8819          .    0.5577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree          0.7081        0.5967          0.2450          .    0.1114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married           0.1892        0.5128         -0.8263          .    0.3236</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74           2095.5737     5619.2365         -0.7211     0.5181    0.2248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75           1532.0553     2466.4844         -0.2903     0.9563    0.1342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            eCDF Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance     0.6444</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age          0.1577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ         0.1114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack    0.6404</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan   0.0827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite    0.5577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     0.1114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      0.3236</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74         0.4470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75         0.2876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Balance for Matched Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance          0.5774        0.3510          1.0280     0.6880    0.1748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age              25.8162       25.9135         -0.0136     0.4954    0.0670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ             10.3459       10.0865          0.1290     0.5967    0.0245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack         0.8432        0.4703          1.0259          .    0.3730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan        0.0595        0.2811         -0.9372          .    0.2216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite         0.0973        0.2486         -0.5107          .    0.1514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree          0.7081        0.6486          0.1308          .    0.0595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married           0.1892        0.3405         -0.3864          .    0.1514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74           2095.5737     3393.9055         -0.2657     0.7718    0.0949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75           1532.0553     2011.2096         -0.1488     1.0304    0.0713</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            eCDF Max Std. Pair Dist.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance     0.4216          1.0326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age          0.1946          1.1664</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ         0.0703          0.4463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack    0.3730          1.0259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan   0.2216          1.3943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite    0.1514          0.5107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     0.0595          0.1308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      0.1514          0.6625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74         0.2973          0.3498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75         0.2054          0.4251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample Sizes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All           429     185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Matched       185     185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unmatched     244       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Discarded       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2:1 genetic matching with replacement without PS</span></span></span>
<span class="r-in"><span><span class="va">m.out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">nodegree</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                    <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                  method <span class="op">=</span> <span class="st">"genetic"</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  ratio <span class="op">=</span> <span class="fl">2</span>, distance <span class="op">=</span> <span class="st">"mahalanobis"</span>,</span></span>
<span class="r-in"><span>                  pop.size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co">#use much larger pop.size</span></span></span>
<span class="r-in"><span><span class="va">m.out2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A `matchit` object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: 2:1 genetic matching with replacement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - distance: Mahalanobis - number of obs.: 614 (original), 302 (matched)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - target estimand: ATT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, race, nodegree, married, re74, re75</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out2</span>, un <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matchit(formula = treat ~ age + educ + race + nodegree + married + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     re74 + re75, data = lalonde, method = "genetic", distance = "mahalanobis", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     replace = TRUE, ratio = 2, pop.size = 10)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Balance for Matched Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age              25.8162       25.0595          0.1058     0.7234    0.0412</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ             10.3459       10.3189          0.0134     1.0229    0.0074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack         0.8432        0.8378          0.0149          .    0.0054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan        0.0595        0.0595          0.0000          .    0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite         0.0973        0.1027         -0.0182          .    0.0054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree          0.7081        0.7081          0.0000          .    0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married           0.1892        0.1622          0.0690          .    0.0270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74           2095.5737     2071.5698          0.0049     1.3109    0.0287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75           1532.0553     1104.6774          0.1328     1.7164    0.0382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            eCDF Max Std. Pair Dist.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age          0.1703          0.4397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ         0.0324          0.2420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack    0.0054          0.0149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan   0.0000          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite    0.0054          0.0182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     0.0000          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      0.0270          0.1104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74         0.1757          0.2469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75         0.0865          0.2999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample Sizes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All            429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Matched (ESS)   40.74     185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Matched        117.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unmatched      312.         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Discarded        0.         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1:1 genetic matching on just age, educ, re74, and re75</span></span></span>
<span class="r-in"><span><span class="co"># within calipers on PS and educ; other variables are</span></span></span>
<span class="r-in"><span><span class="co"># used to estimate PS</span></span></span>
<span class="r-in"><span><span class="va">m.out3</span> <span class="op">&lt;-</span> <span class="fu"><a href="matchit.html">matchit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">nodegree</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                    <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                  method <span class="op">=</span> <span class="st">"genetic"</span>,</span></span>
<span class="r-in"><span>                  mahvars <span class="op">=</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>,</span></span>
<span class="r-in"><span>                  caliper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.05</span>, educ <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  std.caliper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  pop.size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co">#use much larger pop.size</span></span></span>
<span class="r-in"><span><span class="va">m.out3</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A `matchit` object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: 1:1 genetic matching without replacement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - distance: Mahalanobis [matching]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Propensity score [caliper]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              - estimated with logistic regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - caliper: &lt;distance&gt; (0.015), educ (2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614 (original), 218 (matched)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - target estimand: ATT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, race, nodegree, married, re74, re75</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.out3</span>, un <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matchit(formula = treat ~ age + educ + race + nodegree + married + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     re74 + re75, data = lalonde, method = "genetic", mahvars = ~age + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     educ + re74 + re75, caliper = c(0.05, educ = 2), std.caliper = c(TRUE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     FALSE), pop.size = 10)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Balance for Matched Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance          0.5003        0.4929          0.0335     1.0324    0.0110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age              25.7064       25.6514          0.0077     0.5361    0.0606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ             10.2385       10.4128         -0.0867     0.5612    0.0285</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack         0.7339        0.7156          0.0505          .    0.0183</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan        0.1009        0.1193         -0.0776          .    0.0183</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite         0.1651        0.1651          0.0000          .    0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree          0.6881        0.6147          0.1614          .    0.0734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married           0.2385        0.2110          0.0703          .    0.0275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74           2732.5276     2320.0955          0.0844     1.7046    0.0410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75           2042.2572     1533.4687          0.1580     2.1128    0.0366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            eCDF Max Std. Pair Dist.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance     0.0826          0.0423</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age          0.1927          1.0283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ         0.0734          1.0084</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raceblack    0.0183          0.1009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racehispan   0.0183          0.3879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> racewhite    0.0000          0.0550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     0.0734          0.8879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      0.0275          0.5856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74         0.2202          0.5259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re75         0.1009          0.5668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample Sizes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All           429     185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Matched       109     109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unmatched     320      76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Discarded       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Ho, Kosuke Imai, Gary King, Elizabeth Stuart, Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

